# godao

Given a Model like this:

```golang
type User struct {
	Id        string `col:"id" id:"true"`
	Name      string `col:"name"`
	Email     string `col:"email"`
	CreatedAt int64  `col:"created_at"`
	UpdatedAt int64  `col:"updated_at"`
}

```

By running:

```golang
models.GenerateFile(test.User{}, "accounts", "./test")
```

Generates a DAO file:

```golang
// AUTOGENERATED -- DO NOT MODIFY!!!

package test

import (
	"github.com/degupta/godao/datastore"
	"github.com/degupta/godao/models"
)

var (
	userModelInfo *models.ModelInfo
)

func init() {
	var err error

	userModelInfo, err = models.GetModelInfo(User{}, "accounts", true)
	if err != nil {
		panic(err)
	}

}

func NewUser() *User {
	return &User{}
}

func (user User) getId() []interface{} {
	return []interface{}{
		&user.Id,
	}
}

func (user User) getDest() []interface{} {
	return []interface{}{
		&user.Id,
		&user.Name,
		&user.Email,
		&user.CreatedAt,
		&user.UpdatedAt,
	}
}

func GetUserById(tx datastore.TxWrapper, id string) (*User, error) {
	user := NewUser()
	err := models.GetById(tx, userModelInfo, user.getId(), user.getDest()...)
	if err != nil {
		return nil, err
	} else {
		return user, nil
	}
}

func (user *User) UpdateTx(tx datastore.TxWrapper) error {
	return models.UpdateTx(tx, userModelInfo, user.getDest()...)
}

func (user *User) SaveTx(tx datastore.TxWrapper) error {
	if user.Id == "" {
		return user.CreateTx(tx)
	} else {
		return user.UpdateTx(tx)
	}
}

func (user *User) CreateTx(tx datastore.TxWrapper) error {
	return models.CreateTx(tx, userModelInfo, user.getId(), user.getDest()[1:]...)
}

func DeleteUserTx(tx datastore.TxWrapper, userId string) error {
	return models.DeleteTx(tx, userModelInfo, &userId)
}

```
