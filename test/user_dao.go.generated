// AUTOGENERATED -- DO NOT MODIFY!!!

package test

import (
	"github.com/degupta/godao/datastore"
	"github.com/degupta/godao/models"
)

var (
	userModelInfo *models.ModelInfo
)

func init() {
	var err error

	userModelInfo, err = models.GetModelInfo(User{}, "accounts", true)
	if err != nil {
		panic(err)
	}

}

func NewUser() *User {
	return &User{}
}

func (user User) getId() []interface{} {
	return []interface{}{
		&user.Id,
	}
}

func (user User) getDest() []interface{} {
	return []interface{}{
		&user.Id,
		&user.Name,
		&user.Email,
		&user.CreatedAt,
		&user.UpdatedAt,
	}
}

func GetUserById(tx datastore.TxWrapper, id string) (*User, error) {
	user := NewUser()
	user.Id = id
	err := models.GetByIdTx(tx, userModelInfo, user.getId(), user.getDest()...)
	if err != nil {
		return nil, err
	} else {
		return user, nil
	}
}

func (user *User) UpdateTx(tx datastore.TxWrapper) error {
	return models.UpdateTx(tx, userModelInfo, user.getDest()...)
}

func (user *User) SaveTx(tx datastore.TxWrapper) error {
	if user.Id == "" {
		return user.CreateTx(tx)
	} else {
		return user.UpdateTx(tx)
	}
}

func (user *User) CreateTx(tx datastore.TxWrapper) error {
	return models.CreateTx(tx, userModelInfo, user.getId(), user.getDest()[1:]...)
}

func DeleteUserTx(tx datastore.TxWrapper, userId string) error {
	return models.DeleteTx(tx, userModelInfo, &userId)
}
